# Лабораторная работа 1  

## Введение  

Привет, это - первая лабораторная работа, созданная для изучения ОС Линукс. В первых двух лабораторных работах ты научишься:  
  
- Открывать терминал  
- Вводить команды  
- Использовать самые частоиспользуемые команды  
- Пользоваться гитом (надеюсь, не актуально)  

## Начнем с начала  

У меня нет линукса, откуда взять?  

Сообщество придумало массу вариантов:  

1. Радикальный вариант. Выбери любой дистрибутив и поставь его на железо. Я рекомендую использовать проверенные и популярные дистрибутивы, у них развитое сообщество и существует масса гайдов и статей о том, как ими пользоваться. Вот основные дистрибутивы, с которых можно начать:  
    - [Ubuntu](https://ubuntu.com/) - легко установить, легко найти гайд, легко найти ответ на любой вопрос. Тяжеловесная, не все изменения, вносимые Canonical тебе понравятся.  
    - [Fedora](https://www.fedoraproject.org/) - проект RedHat, дистрибутив часто обновляется имеет свежие версии пакетов и приятно выглядит. Гайдов и подсказок чуть меньше, чем для Ubuntu. Есть сложности с установкой драйверов Nvidia.  
    - [Arch](https://archlinux.org/) - дистрибутив, созданный для тех, кто любит линукс, от тех, кто любит линукс. На [archwiki](https://wiki.archlinux.org/title/Main_page) есть масса материалла, который помогает решить проблеммы не только с арчем, но и любым другим дистрибутивом. Твой главный навык при использовании арча - это умение искать информацию самостоятельно, его сложно установить, им сложнее пользоваться, но оно того стоит, обязательно попробуй, если понравится работать в линуксе.  
2. Менее радикальный вариант. Зачем ставить на реальное железо, когда есть [виртуальное](https://www.virtualbox.org/)? Установить линукс на виртуальную машину просто. Машину можно удалить, если не понравится, установленная ОС не пострадает.  

3. Предложение от майкрософт. WSL (windows subsistem on linux) почитай [гайд](https://learn.microsoft.com/ru-ru/windows/wsl/install) от майкрософт, у меня со второй попытки сработало.  

Другие варианты я не тестировал, думаю, что эти 3 наиболее актуальные.  

Поздравляю ты установил Линукс, запускай машину, открывай терминал (`ctr` + `alt` + `T` на Ubuntu и Fedora, открывай приложение Ubuntu, если твой путь - это wsl). Давай начнем делать лабу.

## Скачаем лабы с git

[Git](https://git-scm.com/) - это настолько мощный и популярный инструмент, что в большинстве дистрибутивов он есть "из коробки". Однако, если вы впервые пользуетеся Линуксом, будет полезно показать как устанавливать приложения. Программы распространяются пакетами (аналог установочных файлов в Windows), использование пакетов для распространения ПО имеет ряд неоспоримых преимуществ, главным из которых является возможность единообразной установки программ. Благодаря тому, что подавляющее большинство программ в линукс устанавливаются пакетами, появилось возможность создать пакетный менеджер (именно с пакетных менеджеров линукс был срисован microsoft store, app store и все похожие приложения).

Чтобы установить git напиши в терминал команду:

```bash
sudo apt install -y git
```

Давай посмотрим, что мы только что сделали. Написанная нами команда состоит из 2-х частей: `sudo` и `apt install -y git`. Первая часть отвечает за то, чтобы команда была выполнена с правами суперпользователя (sudouser), вторая часть - это вызов пакетного менеджера `apt` с аргументами командной строки `install`, `-y` и названием пакета, который мы хотим установить (в нашем случае `git`).

sudo принимает в себя всего один аргумент - команду, которую необходимо выполнить с правами суперпользователя. Установка пакета требует прав суперпользователя, поэтому мы используем `sudo`.

С командой sudo нужно быть очень осторожным, так как с правами суперпользователя можно очень легко сломать систему. Например, на форуме кто-то решил помочь новичкам и посоветовал удалить переводы системных программ на франзцузский язык, для этого он предложил использовать команду

```bash
sudo rm -fr /
```
По словам пользователя форума эта команда удаления языков, `-fr` это французский язык, а `/` значит удаление всех диалектов франзцузского. На самом деле `rm` удаляет файлы, флаг `-f` означает `force`, а флаг `-r` означает рекурсивно, то есть во всех дирректориях. `/` - это ни что иное как корень файловой системы линукс, все остальные файлы и дирректории лежат "внутри" корневой дирректории.

К счастью, разработчики команды `rm` в курсе про этот прикол и реализовали защиту от неопытных пользователей. `rm` на такой запрос ответит просто:

```bash
rm: it is dangerous to operate recursively on '/'
rm: use --no-preserve-root to override this failsafe
```

Однако, команду легко модифицировать так, чтобы она работала "как задумывалось":

```bash
sudo rm -fr /*
```

К счастью, про

Скачай репозиторий с гитхаба:

```bash
git clone https://github.com/Popov-Dmitriy-Ivanovich/linux_labs.git
```

## Первые команды  

Перед тем, как делать задание, давай рассмотрим самые популярные команды. Рекомендую попробовать ввести каждую команду и посмотреть вывод.

### man - твой главный помощник  

man - команда, которая расскажет тебе о любой команде, которую ты можешь написать в терминал. Если ты не знаешь, что делает команда ls, просто напиши `man ls` и прочитай вывод команды. Чтобы скролить вывод команды используй кнопки `j` и `k`, чтобы выполнить поиск по тексту нажми `/` и введи то, что хочешь искать; кнопкой `n` ты можешь посмотреть следующее найденное совпадение, нажав `shift` + `n` ты увидишь предыдущее совпадение. [Подробнее тут](https://vim.rtorr.com/).

Если вдруг, по какой-то причине в man нет описания команды, используй [этот сайт](https://www.google.com/), напиши туда `man <ИМЯ КОМАНДЫ>`.

### pwd  

Показывает путь к текущей дирректории.

### cd

Переходит в другую дирректорию.

### ls

Показывает содержимое дирректории.

### touch

Создает файл.

### rm

Удаляет файл/дирректорию.

### cat  

Конкатенирует содержимое файлов и выводит его в `stdout`. При вызове без аргументов ожидает ввод пользователя, чтобы прекратить ввод `ctrl` + `d`.

### cp

Копирует файл, путь к которому указан в первом аргументе, в путь, который указан во втором аргументе.

### mv

Перемещает файл, путь к которому указан в первом аргументе, в путь, который указан во втором аргументе.

### echo

Выводит аргумент в `stdout`.

### file  

Выводит информацию о типе файла в `stdout`.

### date

Выводит дату и время в `stdout`.

### stat  

Выводит информацию о свойствах файла в `stdout`.

### tty

Выводит имя файла терминала в `stdout`.

### who

Показывает всех, кто залогинен в ОС линукс.

### ps

Показывает активные процессы.

### sed

Потоковый редактор, принимает текст в `stdin`, преобразует его по правилам из аргумента, выводит результат в `stdout`.

### chmod

Меняет права доступа к файлу.

### ln

Создает символьную ссылку.

## >, >>, {}, |, *, ?, ., .., $, ', "

### Перенаправление вывода в файл

Операторы `>` и `>>` записывают стандартный вывод команды в файл, находящийся справа от них. Если файл не существует оба оператора создадут файл. `>` перезаписывает содержимое файла, `>>` дописывает вывод команды в конец файла.

Пример

```bash
ps aux >> ps.txt
```

### PIPE

Оператор `|` перенаправляет стандартный вывод команды (`stdout`) слева в стандартный ввод команды (`stdin`) справа.

Пример

```bash
cat ps.txt | grep ps
```

### Почти регекс

`?` и `*` - это метасимволы в bash.

`*` заменяет собой любое количество символов

`?` заменяет ровно один символ.

Вместо "Буквы*Буквы" будет подставлено все, что начинается и заканчивается на "Буквы" и находится по тому пути, в котором использована `*`.

`?` работает так-же, только заменяет собой всего один символ в имени.

Подробнее про метасимволы можешь посмотреть в лекции, здесь скорее шпаргалка, чем полностью корректное объяснение.

### Директории  

`.` - означает текущая директория.
`..` - означает родительская директория.

### Фигурные скобочки

1. Группировка комманд, позволяет выполнить несколько команд в одном процессе

    ```bash
    { echo "Hello"; echo "World"; } > output.txt # hello \n world
    ```

2. Подстановка диапозонов (как `*` и `?`, только будут подставлены конкретные значения)

    ```bash
    echo {1..5} # 1 2 3 4 5
    ```

### Переменные

В bash можно создать переменную, для этого нужно написать `ИМЯ_ПЕРМЕННОЙ`=`ЗНАЧЕНИЕ_ПЕРЕМЕННОЙ`

`$ИМЯ_ПЕРЕМЕННОЙ` подставит значение переменной

Если выражение написано в одинарных кавычках переменные не подставляются

Если выражение написано в двойных кавычках переменные подставляются

## BASH ловит даже на парковке

### mesg

Команда, разрешающая прием сообщений от других пользоватлей

### write

Команда, отправляющая сообщения другим пользователям

## Задание ЛР1  

1. Создайте файл hello_world.txt
2. Запишите в файл hello_world.txt текст "hello world"
3. Определите следующие параметры среды:

    - текущее время; (Вывести на экран)
    - имя Вашего терминала; (сохранить в файл snap1.txt)
    - имя Вашей рабочей директории, имя домашней директории Вашего пользователя; ( сохранить в файл snap2.txt)
    - имена и соответствующие им терминалы всех активных пользователей; (сохранить в файл snap3.txt)
    - номера всех доступных для Вашего наблюдения активных процессов; (сохранить в файл snap4.txt)
    - параметры Вашего терминала (сохранить в файл snap5.txt)
4. Создайте файл second.type, содержащий информацию о типах (по содержимому) всех файлов Вашей директории
5. Создайте файл second.rights, содержащий информацию о правах доступа и владельцах файлов в Вашей директории
6. Выведите на экран информацию о всех файлах начинающихся на snap, имеющих расширение .txt, находящихся в текущей дирректории
7. Создайте файл t7, для этого в файле t7_template.txt замените {my_name} на ваше имя, {professor_name} на имя преподавателя, принимающего лабораторную работу, {my_group} на вашу группу
8. Создайте дирректорию scripts и перейдите в неё
9. В дирректории scripts создайте файл `my_first_bash.sh`
10. Переместитие файл t7_template.txt в директорию scripts
11. В файл my_first_bash.sh напишите команды, которые вы использовали для того, чтобы выполнить пункт 7
12. Дайте всем пользователям права на запуск файла `my_first_bash.sh`
13. Отберите у своего пользователя право на запись в файл `my_first_bash.sh`
14. Запустите скрипт `my_first_bash.sh`
15. Убедитесь, что скрипт `my_first_bash.sh` защищен от записи
16. Верните себе права на запись в файл `my_first_bash.sh`
17. Допишите в начало файла `my_first_bash.sh` строку `#!/bin/bash`